##################################
README for CKAN quick installation
##################################
Please make sure that git, subversion, libxml2-devel, libxslt-devel, postgresql-devel, gcc, mercurial, python-devel
CKAN requires that a httpd, mod_wsgi, tomcat6, virtualenv and postgresql are installed. Postgresql also requires initialized db and that the following commands are run:

sudo -u postgres createuser -S -D -R -P ckanuser
sudo -u postgres createdb -O ckanuser ckantest

Use password 'pass'.
Also edit /var/lib/pgsql/data/pg_hba.conf to replace ident with trust before these steps. Afterwards restart database.
As regular user, first go to ckan_install directory that you had when extracting the package:

  cd ckan_install

Then run install.sh

 ./install.sh

After this, edit src/ckan/development.ini and modify site_id to match your hostname. Also make sure that
 
 args = ("ckan.log", "a", 20000000, 9)
 solr_url = http://127.0.0.1:8080/solr-example

Line points to a httpd writable file and directory, eg. create /var/log/ckan and issue 'chown apache /var/log/ckan'.
Create directories sstore and data to src/ckan
cd ${CKAN_DIR}
cd src/ckan
mkdir data sstore
chown apache data sstore

The next script to run is config_db_solr.sh. This installs solr and configures the database.
 ./config_db_solr.sh

Then next steps as root:

setsebool -P httpd_can_network_connect 1
chcon -v --type=httpd_sys_content_t ${CKAN_DIR} <- replace this and see that the parent directories are 0755 and have same seLinux rules

Copy ckan.conf to /etc/httpd/conf.d/
Copy solr.xml to /etc/tomcat6/Catalina/localhost/
 cp ${CKAN_DIR}/src/ckan/config/solr/schema-1.4.xml ${SOLR_DIR}/example/solr/conf/schema.xml
Modify ${SOLR_DIR}/example/solr/conf/solrconfig.xml, and modify:
   <dataDir>${solr.data.dir:${SOLR_DIR}/example/solr/data}</dataDir>
Restart both tomcat + httpd

