================================================================================
 Package                Arch   Version                Repository           Size
================================================================================
Installing:
 kata-ckan-prod         x86_64 588762-1.el6           /kata-ckan-prod-588762-1.el6.x86_64
                                                                           79 M
Installing for dependencies:
 SDL                    x86_64 1.2.14-3.el6           base                193 k
 apr                    x86_64 1.3.9-5.el6_2          updates             123 k
 apr-util               x86_64 1.3.9-3.el6_0.1        base                 87 k
 apr-util-ldap          x86_64 1.3.9-3.el6_0.1        base                 15 k
 erlang                 x86_64 R14B-04.1.el6          epel                 26 k
 erlang-appmon          x86_64 R14B-04.1.el6          epel                144 k
 erlang-asn1            x86_64 R14B-04.1.el6          epel                993 k
 erlang-common_test     x86_64 R14B-04.1.el6          epel                508 k
 erlang-compiler        x86_64 R14B-04.1.el6          epel                986 k
 erlang-cosEvent        x86_64 R14B-04.1.el6          epel                148 k
 erlang-cosEventDomain  x86_64 R14B-04.1.el6          epel                113 k
 erlang-cosFileTransfer x86_64 R14B-04.1.el6          epel                167 k
 erlang-cosNotification x86_64 R14B-04.1.el6          epel                718 k
 erlang-cosProperty     x86_64 R14B-04.1.el6          epel                160 k
 erlang-cosTime         x86_64 R14B-04.1.el6          epel                106 k
 erlang-cosTransactions x86_64 R14B-04.1.el6          epel                164 k
 erlang-crypto          x86_64 R14B-04.1.el6          epel                 50 k
 erlang-debugger        x86_64 R14B-04.1.el6          epel                439 k
 erlang-dialyzer        x86_64 R14B-04.1.el6          epel                567 k
 erlang-diameter        x86_64 R14B-04.1.el6          epel                449 k
 erlang-docbuilder      x86_64 R14B-04.1.el6          epel                191 k
 erlang-edoc            x86_64 R14B-04.1.el6          epel                301 k
 erlang-erl_docgen      x86_64 R14B-04.1.el6          epel                109 k
 erlang-erl_interface   x86_64 R14B-04.1.el6          epel                149 k
 erlang-erts            x86_64 R14B-04.1.el6          epel                2.0 M
 erlang-et              x86_64 R14B-04.1.el6          epel                197 k
 erlang-eunit           x86_64 R14B-04.1.el6          epel                139 k
 erlang-examples        x86_64 R14B-04.1.el6          epel                832 k
 erlang-gs              x86_64 R14B-04.1.el6          epel                608 k
 erlang-hipe            x86_64 R14B-04.1.el6          epel                1.0 M
 erlang-ic              x86_64 R14B-04.1.el6          epel                845 k
 erlang-inets           x86_64 R14B-04.1.el6          epel                749 k
 erlang-inviso          x86_64 R14B-04.1.el6          epel                153 k
 erlang-jinterface      x86_64 R14B-04.1.el6          epel                 94 k
 erlang-kernel          x86_64 R14B-04.1.el6          epel                1.0 M
 erlang-megaco          x86_64 R14B-04.1.el6          epel                7.8 M
 erlang-mnesia          x86_64 R14B-04.1.el6          epel                662 k
 erlang-observer        x86_64 R14B-04.1.el6          epel                205 k
 erlang-odbc            x86_64 R14B-04.1.el6          epel                 59 k
 erlang-orber           x86_64 R14B-04.1.el6          epel                908 k
 erlang-os_mon          x86_64 R14B-04.1.el6          epel                104 k
 erlang-otp_mibs        x86_64 R14B-04.1.el6          epel                 27 k
 erlang-parsetools      x86_64 R14B-04.1.el6          epel                164 k
 erlang-percept         x86_64 R14B-04.1.el6          epel                140 k
 erlang-pman            x86_64 R14B-04.1.el6          epel                104 k
 erlang-public_key      x86_64 R14B-04.1.el6          epel                402 k
 erlang-reltool         x86_64 R14B-04.1.el6          epel                296 k
 erlang-runtime_tools   x86_64 R14B-04.1.el6          epel                209 k
 erlang-sasl            x86_64 R14B-04.1.el6          epel                263 k
 erlang-snmp            x86_64 R14B-04.1.el6          epel                1.5 M
 erlang-ssh             x86_64 R14B-04.1.el6          epel                361 k
 erlang-ssl             x86_64 R14B-04.1.el6          epel                378 k
 erlang-stdlib          x86_64 R14B-04.1.el6          epel                2.1 M
 erlang-syntax_tools    x86_64 R14B-04.1.el6          epel                317 k
 erlang-test_server     x86_64 R14B-04.1.el6          epel                272 k
 erlang-toolbar         x86_64 R14B-04.1.el6          epel                 49 k
 erlang-tools           x86_64 R14B-04.1.el6          epel                535 k
 erlang-tv              x86_64 R14B-04.1.el6          epel                377 k
 erlang-typer           x86_64 R14B-04.1.el6          epel                 58 k
 erlang-webtool         x86_64 R14B-04.1.el6          epel                 45 k
 erlang-wx              x86_64 R14B-04.1.el6          epel                2.4 M
 erlang-xmerl           x86_64 R14B-04.1.el6          epel                939 k
 httpd                  x86_64 2.2.15-15.el6.centos.1 base                813 k
 httpd-tools            x86_64 2.2.15-15.el6.centos.1 base                 70 k
 libXxf86vm             x86_64 1.1.0-1.el6            base                 18 k
 libcurl-openssl        x86_64 7.28.1-1.1             security_shibboleth 182 k
 liblog4shib1           x86_64 1.0.5-1.1              security_shibboleth  68 k
 libmemcached           x86_64 0.31-1.1.el6           base                 80 k
 libsaml8               x86_64 2.5.1-1.1              security_shibboleth 966 k
 libtool-ltdl           x86_64 2.2.6-15.5.el6         base                 44 k
 libxerces-c-3_1        x86_64 3.1.1-2.1              security_shibboleth 878 k
 libxml-security-c17    x86_64 1.7.0-1.3              security_shibboleth 272 k
 libxmltooling6         x86_64 1.5.2-1.1              security_shibboleth 685 k
 libxslt                x86_64 1.1.26-2.el6_3.1       updates             452 k
 mailcap                noarch 2.1.31-2.el6           base                 27 k
 mesa-dri-drivers       x86_64 7.11-5.el6             base                 11 M
 mesa-libGL             x86_64 7.11-5.el6             base                145 k
 mesa-libGLU            x86_64 7.11-5.el6             base                201 k
 mod_ssl                x86_64 1:2.2.15-15.el6.centos.1
                                                      base                 87 k
 mod_wsgi               x86_64 3.2-1.el6              base                 66 k
 opensaml-schemas       x86_64 2.5.1-1.1              security_shibboleth  30 k
 postgresql             x86_64 8.4.13-1.el6_3         updates             2.8 M
 postgresql-libs        x86_64 8.4.13-1.el6_3         updates             200 k
 postgresql-server      x86_64 8.4.13-1.el6_3         updates             3.4 M
 python-meld3           x86_64 0.6.7-1.el6            epel                 71 k
 rabbitmq-server        noarch 2.6.1-1.el6            epel                1.1 M
 shibboleth             x86_64 2.5.1-1.1              security_shibboleth 1.3 M
 supervisor             noarch 2.1-8.el6              epel                292 k
 tcl                    x86_64 1:8.5.7-6.el6          base                1.9 M
 tk                     x86_64 1:8.5.7-5.el6          base                1.4 M
 unixODBC               x86_64 2.2.14-12.el6_3        updates             378 k
 wxBase                 x86_64 2.8.12-1.el6.centos    extras              572 k
 wxGTK                  x86_64 2.8.12-1.el6.centos    extras              2.9 M
 wxGTK-gl               x86_64 2.8.12-1.el6.centos    extras               31 k
 xmltooling-schemas     x86_64 1.5.2-1.1              security_shibboleth  12 k

Transaction Summary
================================================================================
Install      96 Package(s)

Total size: 146 M
Total download size: 67 M
Installed size: 267 M

+ '[' -f /tmp/kata-SKIP04 ']'
+ patchdir=/usr/share/kata-ckan-prod/setup-patches
+ service tomcat6 stop
Stopping tomcat6: [  OK  ]
+ cd /etc/tomcat6
+ patch -b -p2 -i /usr/share/kata-ckan-prod/setup-patches/tomcat6.conf.patch
patching file tomcat6.conf
+ python /usr/share/mcfg/tool/mcfg.py run /usr/share/mcfg/config/kata-template.ini /root/kata-master.ini 4
+ service tomcat6 start
Starting tomcat6: [  OK  ]
+ '[' -f /tmp/kata-SKIP20 ']'
+ patchdir=/usr/share/kata-ckan-prod/setup-patches
+ pushd /var/lib/pgsql/data
++ ls
++ wc -l
+ datafiles=0
+ '[' 0 -ne 0 ']'
+ rm -f /tmp/kata-SKIP-dbinit
+ service postgresql initdb
Initializing database: [  OK  ]
+ su -c 'patch -b -p2 -i /usr/share/kata-ckan-prod/setup-patches/pg_hba.conf.patch' postgres
patching file pg_hba.conf
+ popd
+ service postgresql start
Starting postgresql service: [  OK  ]
+ chkconfig postgresql on
+ cmd='CREATE ROLE ckanuser PASSWORD '\''md5372712b8c6097730c3164ddd4f9275e0'\'' NOSUPERUSER NOCREATEDB NOCREATEROLE INHERIT LOGIN'
+ sleep 3
+ su -c 'psql -c "CREATE ROLE ckanuser PASSWORD '\''md5372712b8c6097730c3164ddd4f9275e0'\'' NOSUPERUSER NOCREATEDB NOCREATEROLE INHERIT LOGIN"' postgres
CREATE ROLE
+ su -c 'createdb -O ckanuser ckandb' postgres
+ '[' -f /tmp/kata-SKIP22 ']'
+ instloc=/home/ckan
+ cp /opt/solr/conf/schema.xml /opt/solr/conf/schema.xml.bak
+ cp /home/ckan/pyenv/src/ckan/ckan/config/solr/schema-2.0.xml /opt/solr/conf/schema.xml
+ service tomcat6 restart
Stopping tomcat6: [  OK  ]
Starting tomcat6: [  OK  ]
+ chkconfig tomcat6 on
+ '[' -f /tmp/kata-SKIP30 ']'
+ instloc=/home/ckan
+ cd /home/ckan
+ source pyenv/bin/activate
++ deactivate nondestructive
++ unset pydoc
++ '[' -n '' ']'
++ '[' -n '' ']'
++ '[' -n /bin/sh -o -n '' ']'
++ hash -r
++ '[' -n '' ']'
++ unset VIRTUAL_ENV
++ '[' '!' nondestructive = nondestructive ']'
++ VIRTUAL_ENV=/home/ckan/pyenv
++ export VIRTUAL_ENV
++ _OLD_VIRTUAL_PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin
++ PATH=/home/ckan/pyenv/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin
++ export PATH
++ '[' -n '' ']'
++ '[' -z '' ']'
++ _OLD_VIRTUAL_PS1=
++ '[' x '!=' x ']'
+++ basename /home/ckan/pyenv
++ '[' pyenv = __ ']'
+++ basename /home/ckan/pyenv
++ PS1='(pyenv)'
++ export PS1
++ alias 'pydoc=python -m pydoc'
++ '[' -n /bin/sh -o -n '' ']'
++ hash -r
+ cd pyenv/src/ckan
++ dirname /usr/share/kata-ckan-prod/setup-scripts/30setupckanprod.sh
+ myipcmd=/usr/share/kata-ckan-prod/setup-scripts/myip.sh
++ /usr/share/kata-ckan-prod/setup-scripts/myip.sh
+ myip=192.168.122.25
+ sed -e 's,\(ckan.site_url = http://\)[^ ]*,\1192.168.122.25,' development.ini
+ mv development.ini.1 development.ini
+ '[' '!' -e /tmp/kata-SKIP-dbinit ']'
+ paster --plugin=ckan db init
2012-12-12 17:56:14,802 DEBUG [ckanext.kata] disable search
2012-12-12 17:56:15,193 DEBUG [ckanext.harvest.model] Harvest tables defined in memory
2012-12-12 17:56:15,196 DEBUG [ckanext.harvest.model] Harvest table creation deferred
/home/ckan/pyenv/lib/python2.6/site-packages/sqlalchemy/engine/reflection.py:47: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_lname
  ret = fn(self, con, *args, **kw)
/home/ckan/pyenv/lib/python2.6/site-packages/sqlalchemy/engine/reflection.py:47: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_slname
  ret = fn(self, con, *args, **kw)
/home/ckan/pyenv/lib/python2.6/site-packages/sqlalchemy/engine/reflection.py:47: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_suname
  ret = fn(self, con, *args, **kw)
/home/ckan/pyenv/lib/python2.6/site-packages/sqlalchemy/engine/reflection.py:47: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_uname
  ret = fn(self, con, *args, **kw)
/home/ckan/pyenv/lib/python2.6/site-packages/sqlalchemy/engine/reflection.py:47: SAWarning: Skipped unsupported reflection of expression-based index idx_user_name_index
  ret = fn(self, con, *args, **kw)
2012-12-12 17:56:49,202 INFO  [ckan.model] CKAN database version upgraded: 0 -> 62
2012-12-12 17:56:49,328 INFO  [ckan.model] Database initialised
Initialising DB: SUCCESS
+ '[' -f /tmp/kata-SKIP31 ']'
+ ckauser=ckan
+ mkdir -p /opt/data/ckan
+ pushd /opt/data/ckan
+ mkdir data sstore data_tree
+ chown ckan: data sstore data_tree
+ '[' -f /tmp/kata-SKIP10 ']'
+ instloc=/home/ckan
+ cd /home/ckan
+ source pyenv/bin/activate
++ deactivate nondestructive
++ unset pydoc
++ '[' -n '' ']'
++ '[' -n '' ']'
++ '[' -n /bin/sh -o -n '' ']'
++ hash -r
++ '[' -n '' ']'
++ unset VIRTUAL_ENV
++ '[' '!' nondestructive = nondestructive ']'
++ VIRTUAL_ENV=/home/ckan/pyenv
++ export VIRTUAL_ENV
++ _OLD_VIRTUAL_PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin
++ PATH=/home/ckan/pyenv/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin
++ export PATH
++ '[' -n '' ']'
++ '[' -z '' ']'
++ _OLD_VIRTUAL_PS1=
++ '[' x '!=' x ']'
+++ basename /home/ckan/pyenv
++ '[' pyenv = __ ']'
+++ basename /home/ckan/pyenv
++ PS1='(pyenv)'
++ export PS1
++ alias 'pydoc=python -m pydoc'
++ '[' -n /bin/sh -o -n '' ']'
++ hash -r
+ paster --plugin=ckanext-harvest harvester initdb --config=/home/ckan/pyenv/src/ckan/development.ini
2012-12-12 17:56:51,801 DEBUG [ckanext.kata] disable search
2012-12-12 17:56:51,909 DEBUG [ckanext.harvest.model] Harvest tables defined in memory
2012-12-12 17:56:52,847 DEBUG [ckanext.harvest.model] Harvest tables created
2012-12-12 17:56:52,916 DEBUG [ckanext.harvest.plugin] Using auth profile at ckanext.harvest.logic.auth
2012-12-12 17:56:52,965 DEBUG [ckanext.harvest.model] Harvest tables already exist

DB tables created
+ '[' -f /tmp/kata-SKIP16 ']'
+ packagedir=/usr/share/kata-ckan-prod
+ pushd /etc/shibboleth
+ patch -b -p2 -i /usr/share/kata-ckan-prod/setup-patches/shibboleth2.xml.patch
patching file shibboleth2.xml
+ patch -b -p2 -i /usr/share/kata-ckan-prod/setup-patches/attribute-map.xml.patch
patching file attribute-map.xml
+ patch -b -p2 -i /usr/share/kata-ckan-prod/setup-patches/attribute-policy.xml.patch
+ popd
+ cp /etc/httpd/conf.d/shib.conf /etc/httpd/conf.d/shib.conf.bak
+ pushd /etc/httpd/conf.d
+ patch -b -p2 -i /usr/share/kata-ckan-prod/setup-patches/shib.conf.patch
patching file shib.conf
Hunk #2 succeeded at 13 with fuzz 1.
+ popd
+ /usr/bin/python /usr/share/mcfg/tool/mcfg.py run /usr/share/mcfg/config/kata-template.ini /root/kata-master.ini 16
+ chown shibd:shibd /etc/shibboleth/spkey.pem
+ chmod og= /etc/shibboleth/spkey.pem
+ mv /etc/shibboleth/sp-key.pem /etc/shibboleth/sp-key.pem.notused
+ mv /etc/shibboleth/sp-cert.pem /etc/shibboleth/sp-cert.pem.notused
+ '[' -f /tmp/kata-SKIP24 ']'
+ packagedir=/usr/share/kata-ckan-prod
+ pushd /etc/httpd/conf.d/
+ patch -b -p2 -i /usr/share/kata-ckan-prod/setup-patches/ssl.conf.patch
patching file ssl.conf
+ /usr/bin/python /usr/share/mcfg/tool/mcfg.py run /usr/share/mcfg/config/kata-template.ini /root/kata-master.ini 24
+ popd
+ '[' -f /tmp/kata-SKIP32 ']'
+ patchdir=/usr/share/kata-ckan-prod/setup-patches
+ service httpd stop
Stopping httpd: [FAILED]
+ pushd /etc/httpd/conf
+ patch -b -p2 -i /usr/share/kata-ckan-prod/setup-patches/httpd.conf.patch
patching file httpd.conf
+ mv httpd.conf httpd.conf.step1
++ dirname /usr/share/kata-ckan-prod/setup-scripts/32setupapache.sh
+ myipcmd=/usr/share/kata-ckan-prod/setup-scripts/myip.sh
++ /usr/share/kata-ckan-prod/setup-scripts/myip.sh
+ myip=192.168.122.25
+ sed -e s/%%MYIP%%/192.168.122.25/ httpd.conf.step1
+ /usr/bin/python /usr/share/mcfg/tool/mcfg.py run /usr/share/mcfg/config/kata-template.ini /root/kata-master.ini 32
+ popd
+ chkconfig httpd on
+ chown -R ckan:apache /home/ckan/pyenv
+ chmod -R 755 /home/ckan
+ setsebool -P httpd_can_network_connect 1
+ chcon -R --type=httpd_sys_content_t /home/ckan
+ touch /home/ckan/pyenv/ckan.log
+ chown ckan:apache /home/ckan/pyenv/ckan.log
+ chmod g+w /home/ckan/pyenv/ckan.log
+ chown -R ckan:apache /opt/data/ckan
+ chcon -R --type=httpd_sys_content_t /opt/data/ckan
+ chmod -R g+w /opt/data/ckan/data /opt/data/ckan/sstore
++ echo /usr/lib64/python2.6 /usr/lib/python2.6
+ for dir in '$(echo /usr/lib*/python2.6)'
+ sed -i.orig 's/CFUNCTYPE(c_int)(lambda: None)/#CFUNCTYPE(c_int)(lambda: None)/' /usr/lib64/python2.6/ctypes/__init__.py
+ for dir in '$(echo /usr/lib*/python2.6)'
+ sed -i.orig 's/CFUNCTYPE(c_int)(lambda: None)/#CFUNCTYPE(c_int)(lambda: None)/' /usr/lib/python2.6/ctypes/__init__.py
sed: can't read /usr/lib/python2.6/ctypes/__init__.py: No such file or directory
+ '[' -f /tmp/kata-SKIP61 ']'
+ instloc=/home/ckan
+ service rabbitmq-server start
Starting rabbitmq-server: SUCCESS
rabbitmq-server.
+ chkconfig rabbitmq-server on
+ '[' '!' -e /tmp/kata-SKIP-dbinit ']'
+ /home/ckan/pyenv/bin/paster --plugin=ckanext-harvest harvester source http://www.fsd.uta.fi/fi/aineistot/luettelo/fsd-ddi-records-uris-fi.txt DDI --config=/home/ckan/pyenv/src/ckan/development.ini
2012-12-12 17:57:45,386 DEBUG [ckanext.kata] disable search
2012-12-12 17:57:45,573 DEBUG [ckanext.harvest.model] Harvest tables defined in memory
2012-12-12 17:57:45,575 DEBUG [ckanext.harvest.model] Harvest tables already exist
2012-12-12 17:57:45,599 DEBUG [ckanext.harvest.plugin] Using auth profile at ckanext.harvest.logic.auth
2012-12-12 17:57:45,614 INFO  [ckanext.harvest.logic.action.create] Creating harvest source: {'user_id': u'', 'url': u'http://www.fsd.uta.fi/fi/aineistot/luettelo/fsd-ddi-records-uris-fi.txt', 'publisher_id': u'', 'type': u'DDI', 'active': True, 'config': None}
2012-12-12 17:57:45,664 INFO  [ckanext.harvest.logic.action.create] Harvest source created: 5cb03b89-9034-444a-94b5-2b98f5c6a12a
2012-12-12 17:57:45,685 INFO  [ckanext.harvest.logic.action.create] Harvest job create: {'source_id': u'5cb03b89-9034-444a-94b5-2b98f5c6a12a'}
2012-12-12 17:57:45,805 INFO  [ckanext.harvest.logic.action.create] Harvest job saved 995aa121-6d94-4770-ac7d-6b1987b865f5

Created new harvest source:
Source id: 5cb03b89-9034-444a-94b5-2b98f5c6a12a
      url: http://www.fsd.uta.fi/fi/aineistot/luettelo/fsd-ddi-records-uris-fi.txt
     type: DDI
   active: True
     user: 
publisher: 
     jobs: 0

There is 1 harvest source
A new Harvest Job for this source has also been created
+ /home/ckan/pyenv/bin/paster --plugin=ckanext-harvest harvester source http://helda.helsinki.fi/oai/request OAI-PMH --config=/home/ckan/pyenv/src/ckan/development.ini
2012-12-12 17:57:47,031 DEBUG [ckanext.kata] disable search
2012-12-12 17:57:47,108 DEBUG [ckanext.harvest.model] Harvest tables defined in memory
2012-12-12 17:57:47,110 DEBUG [ckanext.harvest.model] Harvest tables already exist
2012-12-12 17:57:47,133 DEBUG [ckanext.harvest.plugin] Using auth profile at ckanext.harvest.logic.auth
2012-12-12 17:57:47,148 INFO  [ckanext.harvest.logic.action.create] Creating harvest source: {'user_id': u'', 'url': u'http://helda.helsinki.fi/oai/request', 'publisher_id': u'', 'type': u'OAI-PMH', 'active': True, 'config': None}
2012-12-12 17:57:47,232 INFO  [ckanext.harvest.logic.action.create] Harvest source created: f2a3be82-3620-40ad-8bfb-d5cf43e03daf
2012-12-12 17:57:47,289 INFO  [ckanext.harvest.logic.action.create] Harvest job create: {'source_id': u'f2a3be82-3620-40ad-8bfb-d5cf43e03daf'}
2012-12-12 17:57:47,347 INFO  [ckanext.harvest.logic.action.create] Harvest job saved ae36c8b2-c004-4d5e-b35f-6711bd56b3ca

Created new harvest source:
Source id: f2a3be82-3620-40ad-8bfb-d5cf43e03daf
      url: http://helda.helsinki.fi/oai/request
     type: OAI-PMH
   active: True
     user: 
publisher: 
     jobs: 0

There are 2 harvest sources
A new Harvest Job for this source has also been created
+ chkconfig supervisord on
Stopping atd: [FAILED]
Starting atd: [  OK  ]
job 1 at 2012-12-12 18:00
Starting shibd: [  OK  ]
Starting httpd: [  OK  ]
Starting supervisord: [  OK  ]
Reloading crond: [  OK  ]
